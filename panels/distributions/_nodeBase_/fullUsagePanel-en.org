* B|
####+BEGIN: bxPanel:common/title-plus
#+title: mailings/distributions
#+roam_tags: branch
#+roam_key: mail/mailings/distributions
[[roam:mail/mailings]]
####+END
####+BEGIN: blee:bxPanel:topPanelControls
*  [[elisp:(org-cycle)][|#Control|]] :: [[elisp:(blee:bnsm:menu-back)][Back]] [[elisp:(toggle-read-only)][read/wr]] | [[elisp:(show-all)][Show-All]]  [[elisp:(org-shifttab)][Overview]]  [[elisp:(progn (org-shifttab) (org-content))][Content]] | [[elisp:(delete-other-windows)][(1)]] | [[elisp:(progn (save-buffer) (kill-buffer))][S&Q]] [[elisp:(save-buffer)][Save]] [[elisp:(kill-buffer)][Quit]] [[elisp:(bury-buffer)][Bury]]  [[elisp:(magit)][Magit]]  [[elisp:(org-cycle)][| ]]
**  [[elisp:(bap:magit:bisos:current-bpo-repos/visit)][BPO-Repos-Magit]] ||
**  [[elisp:(blee:buf:re-major-mode)][Re-Major-Mode]] ||  [[elisp:(org-dblock-update-buffer-bx)][Update Buf Dblocks]] || [[elisp:(org-dblock-bx-blank-buffer)][Blank Buf Dblocks]] || [[elisp:(bx:panel:variablesShow)][bx:panel:variablesShow]]
**  [[elisp:(blee:menu-sel:comeega:maintenance:popupMenu)][||Maintenance]]
**  This File :: *= /bisos/panels/blee-core/mail/mailings/distributions/_nodeBase_/fullUsagePanel-en.org =*
* /file-truename:/  /bisos/git/auth/bxRepos/blee/mtdt/panels/distributions/_nodeBase_/fullUsagePanel-en.org
*  [[elisp:(org-cycle)][|#Select|]]  :: (Results: [[elisp:(blee:bnsm:results-here)][Here]] | [[elisp:(blee:bnsm:results-split-below)][Below]] | [[elisp:(blee:bnsm:results-split-right)][Right]] | [[elisp:(blee:bnsm:results-other)][Other]] | [[elisp:(blee:bnsm:results-popup)][Popup]]) (Select:  [[elisp:(lsip-local-run-command "lpCurrentsAdmin.sh -i currentsGetThenShow")][Show Currents]]  [[elisp:(lsip-local-run-command "lpCurrentsAdmin.sh")][lpCurrentsAdmin.sh]] ) [[elisp:(org-cycle)][| ]]
**  #See:  (Window: [[elisp:(blee:bnsm:results-window-show)][?]] | [[elisp:(blee:bnsm:results-window-set 0)][0]] | [[elisp:(blee:bnsm:results-window-set 1)][1]] | [[elisp:(blee:bnsm:results-window-set 2)][2]] | [[elisp:(blee:bnsm:results-window-set 3)][3]] ) || [[elisp:(lsip-local-run-command-here "echo pushd dest")][echo pushd dir]] || [[elisp:(lsip-local-run-command-here "lsf")][lsf]] || [[elisp:(lsip-local-run-command-here "pwd")][pwd]] |
**  [[elisp:(org-cycle)][|#Destinations|]] :: [[Evolution]] | [[Maintainers]]  [[elisp:(org-cycle)][| ]]
**  #See:  [[elisp:(bx:bnsm:top:panel-blee)][Blee]] | [[elisp:(bx:bnsm:top:panel-listOfDocs)][All Docs]]  E|
####+END
####+BEGIN: blee:bxPanel:title :panelType "=bxPanel=" :title "auto"
* [[elisp:(show-all)][(>]] ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
*   [[img-link:file:/bisos/blee/env/images/fpfByStarElipseTop-50.png][http://www.freeprotocols.org]]_ _   ~Node:: mail/mailings -- distributions~   [[img-link:file:/bisos/blee/env/images/fpfByStarElipseBottom-50.png][http://www.by-star.net]]
* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  [[elisp:(org-shifttab)][<)]] E|
####+END:
####+BEGIN: blee:bxPanel:terseTreeNavigator :panelsList "bxPanel"
* [[elisp:(show-all)][(>]] [[elisp:(describe-function 'org-dblock-write:blee:bxPanel:terseTreeNavigator)][dbf]]
* [[elisp:(show-all)][|n]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_   General Panels ::   [[img-link:file:/bisos/blee/env/images/bystarInside.jpg][http://www.by-star.net]] *|*  [[elisp:(find-file "/libre/ByStar/InitialTemplates/activeDocs/listOfDocs/fullUsagePanel-en.org")][BxDE Top Panel]] *|* [[elisp:(blee:bnsm:panel-goto "/libre/ByStar/InitialTemplates/activeDocs/planning/Main")][ByStar Planning]]

*                                        *━━━━━━━━━━━━━━━━━━━━━━━━*
*   *Siblings*   :: [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/distributions/_nodeBase_")][ = /<distributions>/ = ]] *|* [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/mtdt-conceptAndDesign/_nodeBase_")][ = /<mtdt-conceptAndDesign>/ = ]] *|* [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/mtdt-devel/_nodeBase_")][ = /<mtdt-devel>/ = ]] *|* [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/mtdt-usage/_nodeBase_")][ = /<mtdt-usage>/ = ]] *|* [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/names/_nodeBase_")][ = /<names>/ = ]] *|*
*   *Siblings*   :: [[elisp:(blee:bnsm:panel-goto "/bisos/panels/blee-core/mail/mailings/recipients/_nodeBase_")][ = /<recipients>/ = ]] *|*
*   /Ancestors/  :: [[elisp:(blee:bnsm:panel-goto "//bisos/panels/blee-core/mail/mailings/_nodeBase_")][ =mailings= ]] *|* [[elisp:(blee:bnsm:panel-goto "//bisos/panels/blee-core/mail/_nodeBase_")][ =mail= ]] *|* [[elisp:(blee:bnsm:panel-goto "//bisos/panels/blee-core/_nodeBase_")][ =blee-core= ]] *|* [[elisp:(blee:bnsm:panel-goto "//bisos/panels/_nodeBase_")][ = /<panels>/ = ]] *|* [[elisp:(dired "//bisos")][ ~bisos~ ]] *|*
*                                   _━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━_                          [[elisp:(org-shifttab)][<)]] E|
####+END
####+BEGIN: blee:bxPanel:foldingSection :outLevel 1 :title "Overview" :anchor "Panel"
* [[elisp:(show-all)][(>]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_       [[elisp:(outline-show-subtree+toggle)][| *Overview:* |]] <<Panel>>   [[elisp:(org-shifttab)][<)]] E|
####+END
** +
** Overview Comes Here.
** B|
####+BEGIN: blee:bxPanel:foldingSection :outLevel 1 :sep t :title "Mailing Composition ICMs and Bases" :anchor "" :extraInfo "seedNameDistProc.sh"
* /[[elisp:(beginning-of-buffer)][|^]]  [[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]] [[elisp:(delete-other-windows)][|1]]/
* [[elisp:(show-all)][(>]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_       [[elisp:(outline-show-subtree+toggle)][| *Mailing Composition ICMs and Bases:* |]]  seedNameDistProc.sh  [[elisp:(org-shifttab)][<)]] E|
####+END
####+BEGIN: blee:panel:icm:bash:intro :outLevel 2 :sep nil :folding? t :label "Sh-ICM" :icmName "seedNameDistProc.sh" :comment "" :afterComment ""
** [[elisp:(show-all)][(>]] [[elisp:(blee:menu-sel:outline:popupMenu)][+-]] [[elisp:(blee:menu-sel:navigation:popupMenu)][==]]  [[elisp:(org-cycle)][| /Sh-ICM/ |]] :: [[elisp:(lsip-local-run-command "seedNameDistProc.sh -i examples")][seedNameDistProc.sh]]  [[elisp:(lsip-local-run-command "seedNameDistProc.sh -i visit")][visit]]  [[elisp:(lsip-local-run-command "seedNameDistProc.sh -i describe")][describe]] *|*  == *|*   [[elisp:(org-shifttab)][<)]] E|
####+END:
####+BEGIN: blee:panel:icm:bash:intro :outLevel 2 :sep nil :folding? t :label "Sh-ICM" :icmName "lcntProc.sh mailing" :comment "Must run in an LCNT base" :afterComment "After startMailingSetup.sh"
** [[elisp:(show-all)][(>]] [[elisp:(blee:menu-sel:outline:popupMenu)][+-]] [[elisp:(blee:menu-sel:navigation:popupMenu)][==]]  [[elisp:(org-cycle)][| /Sh-ICM/ |]] :: [[elisp:(lsip-local-run-command "lcntProc.sh mailing -i examples")][lcntProc.sh mailing]]  [[elisp:(lsip-local-run-command "lcntProc.sh mailing -i visit")][visit]]  [[elisp:(lsip-local-run-command "lcntProc.sh mailing -i describe")][describe]] *|*  =Must run in an LCNT base= *|*  After startMailingSetup.sh [[elisp:(org-shifttab)][<)]] E|
####+END:
####+BEGIN: blee:bxPanel:foldingSection :outLevel 1 :sep t :title "Distributions Activities -- Documentation" :anchor "" :extraInfo "(How To)"
* /[[elisp:(beginning-of-buffer)][|^]]  [[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]] [[elisp:(delete-other-windows)][|1]]/
* [[elisp:(show-all)][(>]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_       [[elisp:(outline-show-subtree+toggle)][| *Distributions Activities -- Documentation:* |]]  (How To)  [[elisp:(org-shifttab)][<)]] E|
####+END
**     ============
** How  do ditributions work? -- Overview Of Distributions

***  Each Distribution Sits On Top Of A Mailing
**** Mailing: /acct/employee/lsipusr/BUE/mailings/mohsenPersonal/invitations/2013/0809-reunion
**** Distribution: /acct/employee/lsipusr/BUE/mailings/mohsenPersonal/invitations/2013/0809-reunion/dists/20130806

***  Distribution Processors Are Based On NamesProcessors -- /opt/public/osmt/bin/seedNameDistProc.sh

***  Distributions Use NameOfTheMailing to Track Logs

** Distributions Processing -- distProc.sh (based on seedNameDistProc.sh) Facilities

***  distProc.sh -i mailingNameGet
****  $#=0
****  Based on file hierarchy decide what mailing is this distribution for.

***  distProc.sh -i namesOutputListWith vis_func
****  $1+=listFunc
****  Based on listFunc, list out files to be included or excluded.

***  distProc.sh -i namesOutputToFilesWith
****  $1=tag (includeExcludeTag), $2+=listFunc
****  Based on listFunc, create tag-include.names and tag-exclude.names

***  distProc.sh -i namesResultFor
****  $1=tag (includeExcludeTag)
****  Assumes vis_namesOutputToFilesWith has run before and
****  includeExcludeTag="$1" -- ${includeExcludeTag}-include.names ${includeExcludeTag}-exclude.names
****  are in place.
****  Combines those to produce ${includeExcludeTag}-result.names
****  If $1=dist, then dist-sentLog.names is assumed to be in place and is used as an exclude.

***  distProc.sh -i namesOutputToFilesWithAndResult
****  $1=tag (includeExcludeTag), $2+=listFunc
****  namesOutputToFilesWith + namesResultFor


***  --- DISTRIBUTIONS PROCESSING ---
${G_myName} ${extraInfo} -i distNamesOutputWith vis_examplesAndTests  # = namesOutputToFilesWith dist vis_examplesAndTests
${G_myName} ${extraInfo} -i mailingNameGet                            # Look through preceding ".." and locate first mailingName
${G_myName} ${extraInfo} -i logsToNames                               # Based on mailingNameGet
${G_myName} ${extraInfo} -i distNextBatch                             # After distNamesGenWith + logsToNames = namesResultFor dist
${G_myName} ${extraInfo} -i distPrepWith vis_examplesAndTests         # distNamesOutputWith + logsToNames + distNextBatch
${G_myName} ${extraInfo} -i distPrepWith vis_examplesAndTests         # = namesOutputToFilesWithAndResult dist vis_examplesAndTests
${G_myName} ${extraInfo} -i bbdbNamesInput  ./dist-result.names       # Visit File and run bbdb-names-input -- after (server-start)


** How do I create a new Distribution?

***    1) Go To A Mailings Base
       [[elisp:(lsip-local-run-command "echo pushd ~/BUE/mailings/SPECIFY")][echo pushd ~/BUE/mailings/SPECIFY]]

***    2) Create the Distribution's Base
****      mkdir -p ~/BUE/mailings/someMailing/dists/distName
****      pushd  ~/BUE/mailings/someMailing/dists/distName
****      bystarNameStart.sh -i startObjectGen distribution path

** Distribution Prepapration / Processing

***   distPrep
****    Prepares a particular mailing for distribution. It does the following sequence:
****	    1) distNamesGen
	    ****	    2) logsToNames
****	    3) distNextBatch

***   distNamesGen
****	  <iv_distGenNames>-include.names and <iv_distGenNames>-exclude.names

***   logsToNames
          no args, discovers who has already received the contents
	  so that nobody receives the same content twice.
	  The log is in the Logs directory

***   distNextBatch
          no args, creates a list of names of "Who-to-Send-to-Next".
	  This option basically compare the <iv_distGenNames>-include.names
	  (which are generated by distNamesGen option) with the
	  logs file and the  specials-include.names.
          It creates nextBatch-dist.names.
	  The output then can be used to start the next distribution.

** How do I execute a MailingsDistribution?

    1) bbdbMailings.sh ....

      bbdbMailings.sh  ${extraInfo} -p loadItemsFile=${oneItem} -s ${oneSubject} -a distPrep


    2) Visit nextBatch-dist.names

    3) M-x bbdb-names-input

    4) In the bbdb buffer
         *
	 x
         mbatch-xxx-document

** How do I add a person\'s name for future distribution?

    1) If the person is not in bbdb, add the person to bbdb.

    2) If the person is in bbdb, verify that the person is not
       already subject to distribution. Grep the guy\'s name in
       the Logs directory.

    3) Given the guy\'s bbdb entry,
       x
       names-new-append
       (default is newFolks.names)

    4) Send out
       x
       msend-nedaOffice-AddedToList-Leap

       Customize as needed.

    5) Execute initial catch up distributions.

** How do I add new names to a distribution which is in progress?

    0) Create a freshFolks.names

    1) Run -a distGen  newNames

    2) Visit nextBatch

    3) M-x bbdb-group-input

    4) M-x mbatch-xxx-document

    5) When caught up, include newNames in the right places.

** How do I clean-up after bounces in distributions?

    - Edit the bbdb entry and remove the bad email address.

    - Add that name to /usr/devenv/bbdbNames/Names/excludeBounce.names
####+BEGIN: blee:bxPanel:separator :outLevel 1
* /[[elisp:(beginning-of-buffer)][|^]] [[elisp:(blee:menu-sel:navigation:popupMenu)][==]] [[elisp:(delete-other-windows)][|1]]/
####+END
####+BEGIN: blee:bxPanel:evolution
* [[elisp:(show-all)][(>]] [[elisp:(describe-function 'org-dblock-write:blee:bxPanel:evolution)][dbf]]
*                                   _━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━_
* [[elisp:(show-all)][|n]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_     [[elisp:(org-cycle)][| *Maintenance:* | ]]  [[elisp:(blee:menu-sel:agenda:popupMenu)][||Agenda]]  <<Evolution>>  [[elisp:(org-shifttab)][<)]] E|
####+END
####+BEGIN: blee:bxPanel:foldingSection :outLevel 2 :title "Notes, Ideas, Tasks, Agenda" :anchor "Tasks"
** [[elisp:(show-all)][(>]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_       [[elisp:(outline-show-subtree+toggle)][| /Notes, Ideas, Tasks, Agenda:/ |]] <<Tasks>>   [[elisp:(org-shifttab)][<)]] E|
####+END
*** TODO Some Idea
####+BEGIN: blee:bxPanel:evolutionMaintainers
** [[elisp:(show-all)][(>]] [[elisp:(describe-function 'org-dblock-write:blee:bxPanel:evolutionMaintainers)][dbf]]
** [[elisp:(show-all)][|n]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_       [[elisp:(org-cycle)][| /Bug Reports, Development Team:/ | ]]  <<Maintainers>>
***  Problem Report                       ::   [[elisp:(find-file "")][Send debbug Email]]
***  Maintainers                          ::   [[bbdb:Mohsen.*Banan]]  :: http://mohsen.1.banan.byname.net  E|
####+END
* B|
####+BEGIN: blee:bxPanel:footerPanelControls
* [[elisp:(show-all)][(>]] ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
* /Footer Controls/ ::  [[elisp:(blee:bnsm:menu-back)][Back]]  [[elisp:(toggle-read-only)][toggle-read-only]]  [[elisp:(show-all)][Show-All]]  [[elisp:(org-shifttab)][Cycle Glob Vis]]  [[elisp:(delete-other-windows)][1 Win]]  [[elisp:(save-buffer)][Save]]   [[elisp:(kill-buffer)][Quit]]  [[elisp:(org-shifttab)][<)]] E|
####+END
####+BEGIN: blee:bxPanel:footerOrgParams
* [[elisp:(show-all)][(>]] [[elisp:(describe-function 'org-dblock-write:blee:bxPanel:footerOrgParams)][dbf]]
* [[elisp:(show-all)][|n]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_     [[elisp:(org-cycle)][| *= Org-Mode Local Params: =* | ]]
#+STARTUP: overview
#+STARTUP: lognotestate
#+STARTUP: inlineimages
#+SEQ_TODO: TODO WAITING DELEGATED | DONE DEFERRED CANCELLED
#+TAGS: @desk(d) @home(h) @work(w) @withInternet(i) @road(r) call(c) errand(e)
#+CATEGORY: N:distributions

####+END
####+BEGIN: blee:bxPanel:footerEmacsParams :primMode "org-mode"
* [[elisp:(show-all)][(>]] [[elisp:(describe-function 'org-dblock-write:blee:bxPanel:footerEmacsParams)][dbf]]
* [[elisp:(show-all)][|n]]  _[[elisp:(blee:menu-sel:outline:popupMenu)][±]]_  _[[elisp:(blee:menu-sel:navigation:popupMenu)][Ξ]]_     [[elisp:(org-cycle)][| *= Emacs Local Params: =* | ]]
# Local Variables:
# eval: (setq-local ~selectedSubject "noSubject")
# eval: (setq-local ~primaryMajorMode 'org-mode)
# eval: (setq-local ~blee:panelUpdater nil)
# eval: (setq-local ~blee:dblockEnabler nil)
# eval: (setq-local ~blee:dblockController "interactive")
# eval: (img-link-overlays)
# eval: (set-fill-column 115)
# eval: (blee:fill-column-indicator/enable)
# eval: (bx:load-file:ifOneExists "./panelActions.el")
# End:

####+END
